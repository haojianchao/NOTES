<html>
<head>
  <title>02使用gulp编译scss为wxss</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/6.1.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1023"/>
<h1>02使用gulp编译scss为wxss</h1>

<div>
<span><div>一、回顾gulp</div><div>    基于nodejs的自动任务的运行器----<span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">Grunt、Gulp、Webpack：前端工程化工具</span></div><div><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;"> gulp是</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">前端开发</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">过程中对代码进行构建的工具，是</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">自动化</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">项目的构建利器；她不仅能对网站资源进行优化，而且在开发过程中很多</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">重复的任务</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">能够使用正确的工具自动完成；使用她，我们不仅可以很愉快的编写代码，而且大大</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">提高</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">我们的工作效率。</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">  gulp是基于Nodejs的</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">自动任务运行器</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">，她能自动化地完成</span> <span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">javascript/coffee/sass/less/html/image/css 等文件的的</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">测试</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">、</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">检查</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">、</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">合并</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">、</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">压缩</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">、</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">格式化</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">、</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">浏览器自动刷新</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">、</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">部署文件生成</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">，并</span><span style="font-size: 10.5pt; color: rgb(0, 112, 192); font-family: 宋体;-en-paragraph:true;">监听</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">文件在改动后重复指定的这些步骤。在实现上，她借鉴了</span><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">Unix操作系统的管道（pipe）思想，前一级的输出，直接变成后一级的输入，使得在操作上非常简单。</span></div><div><span style="font-size: 10.5pt; font-family: 宋体;-en-paragraph:true;">  gulp 和 grunt 非常类似，但相比于 grunt 的频繁 IO 操作，gulp 的流操作，能更快地更便捷地完成构建工作。</span></div><div>二、安装模块</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>cnpm i gulp -g</div><div>cnpm i gulp -S</div><div>cnpm i node-sass gulp-sass -D</div><div>cnpm i gulp-clean-css -D   // 压缩css模块 <span style="font-family: &quot;Lucida Console&quot;; font-size: 9pt;">gulp-minify-css/gulp-mincss</span></div><div><span style="font-family: &quot;Lucida Console&quot;; font-size: 9pt;">cnpm i gulp-rename -D</span></div></div><div>三、编写gulpfile.js</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">var gulp = require('gulp');</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">var rename = require(&quot;gulp-rename&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">var scss = require('gulp-sass');</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">var cleanCss = require('gulp-clean-css');</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">gulp.task(&quot;scss&quot;, function(){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    gulp.src(['./**/*.scss', '!node_modules/**/*','!lib/**/*'])</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        .pipe(sass().on('error', sass.logError))</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        .pipe(cleanCss())</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        .pipe(rename(function(path){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            path.extname = '.wxss'</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        }))</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        .pipe(gulp.dest('./'))</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">})</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">gulp.task('watch', function () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  gulp.watch('./pages/**/*', ['scss']);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  gulp.watch('./*.scss', ['scss']);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">});</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">gulp.task('default', ['watch'], function () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  console.log('done!');</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">});</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div></div><div><br/></div></span>
</div></body></html> 