<html>
<head>
  <title>组件之间的传值</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/6.1.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="863"/>
<h1>组件之间的传值</h1>

<div>
<span><div><div><span style="font-size: 12pt;">一、组件间传值</span></div><div><span style="font-size: 12pt;">        父給子传<br/></span></div><div><span style="font-size: 12pt;">        子給父传<br/></span></div><div><span style="font-size: 12pt;">        兄弟组件之间传值----非父子组件传值---$emit/$on   ---  一般不推荐使用---看需求<br/></span></div><div><span style="font-size: 12pt;">        手动挡<br/></span></div><div><span style="font-size: 12pt;">            创建src/bus.js<br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">import</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">Vue</span> <span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">from</span> <span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'vue'</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">var</span> <span style="color: rgb(69, 131, 131); font-family: Monaco;">bus</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">=</span> <span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">new</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">Vue()</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">export default</span> <span style="color: rgb(69, 131, 131); font-family: Monaco;">bus</span></font></div></div><div><span style="font-size: 12pt;">            创建组件controller.vue<br/></span></div><div><span style="font-size: 12pt;">    先引入bus---邮差<br/></span></div><div><span style="font-size: 12pt;">    mounted函数接收事件</span><span style="font-size: 12pt; color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">box-controller   bus.$on()</span><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">template</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">div</span> <span style="color: rgb(0, 0, 255); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">class=</span><span style="color: rgb(0, 128, 0); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">&quot;container&quot;</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">controller</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">button</span> <span style="color: rgb(0, 0, 255); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">@click=</span><span style="color: rgb(0, 128, 0); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">&quot;</span><span style="color: rgb(122, 122, 67); font-family: Monaco;">sendToBox</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">()</span><span style="color: rgb(0, 128, 0); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">&quot;</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">发送数据“110”給box</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">button</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">h1</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">接收到box的数据为：{{</span><span style="color: rgb(102, 14, 122); font-weight: bold; font-family: Monaco;">msg</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">}}</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">h1</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">div</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">template</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">script</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">import</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">bus</span> <span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">from</span> <span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'@/bus.js'</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">export default</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">{</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(122, 122, 67); font-family: Monaco;">data</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">() {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">return</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">{</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(102, 14, 122); font-weight: bold; font-family: Monaco;">msg</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">:</span> <span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">''</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">}</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">},</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(122, 122, 67); font-family: Monaco;">mounted</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">() {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">var</span> <span style="color: rgb(69, 131, 131); font-family: Monaco;">_this</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">=</span> <span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">this</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic; font-family: Monaco;">console</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">.</span><span style="color: rgb(122, 122, 67); font-family: Monaco;">log</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">(</span><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">this</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">)</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="font-family: Monaco; color: rgb(51, 51, 51);">bus.$on(</span><span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'box-controller'</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">,</span> <span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">function</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">(val) {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic; font-family: Monaco;">console</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">.</span><span style="color: rgb(122, 122, 67); font-family: Monaco;">log</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">(val)</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(69, 131, 131); font-family: Monaco;">_this</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">.</span><span style="color: rgb(102, 14, 122); font-weight: bold; font-family: Monaco;">msg</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">= val;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">})</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">},</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(102, 14, 122); font-weight: bold; font-family: Monaco;">methods</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">: {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(122, 122, 67); font-family: Monaco;">sendToBox</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">() {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="font-family: Monaco; color: rgb(51, 51, 51);">bus.$emit(</span><span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'controller-box'</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">,</span> <span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'110'</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">)</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">}</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">}</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">}</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><br style="font-family: Monaco; color: rgb(51, 51, 51);"/></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">script</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">style</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><br style="font-family: Monaco; color: rgb(51, 51, 51);"/></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">style</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div></div><div><span style="font-size: 12pt;">        box.vue发送事件<br/></span></div><div><span style="font-size: 12pt;">      bus.$emit('</span><span style="font-size: 12pt; color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">box-controller</span><span style="font-size: 12pt;">','')<br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">template</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">div</span> <span style="color: rgb(0, 0, 255); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">class=</span><span style="color: rgb(0, 128, 0); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">&quot;container&quot;</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">box</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">h1</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">接收到controller的数据为：{{</span><span style="color: rgb(102, 14, 122); font-weight: bold; font-family: Monaco;">msg</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">}}</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">h1</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">button</span> <span style="color: rgb(0, 0, 255); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">@click=</span><span style="color: rgb(0, 128, 0); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">&quot;</span><span style="color: rgb(122, 122, 67); font-family: Monaco;">sendToController</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">()</span><span style="color: rgb(0, 128, 0); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">&quot;</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">发送数据“马上到”給controller</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">button</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">div</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">template</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">script</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">import</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">bus</span> <span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">from</span> <span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'@/bus.js'</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">export default</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">{</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(122, 122, 67); font-family: Monaco;">data</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">() {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">return</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">{</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(102, 14, 122); font-weight: bold; font-family: Monaco;">msg</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">:</span> <span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">''</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">}</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">},</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(102, 14, 122); font-weight: bold; font-family: Monaco;">methods</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">: {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(122, 122, 67); font-family: Monaco;">sendToController</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">() {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="font-family: Monaco; color: rgb(51, 51, 51);">bus.$emit(</span><span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'box-controller'</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">,</span> <span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'马上到'</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">)</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">}</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">},</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(122, 122, 67); font-family: Monaco;">mounted</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">() {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">var</span> <span style="color: rgb(69, 131, 131); font-family: Monaco;">_this</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">=</span> <span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">this</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="font-family: Monaco; color: rgb(51, 51, 51);">bus.$on(</span><span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'controller-box'</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">,</span> <span style="color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">function</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">(val) {</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic; font-family: Monaco;">console</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">.</span><span style="color: rgb(122, 122, 67); font-family: Monaco;">log</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">(val)</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="color: rgb(69, 131, 131); font-family: Monaco;">_this</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">.</span><span style="color: rgb(102, 14, 122); font-weight: bold; font-family: Monaco;">msg</span> <span style="font-family: Monaco; color: rgb(51, 51, 51);">= val</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="font-family: Monaco; color: rgb(51, 51, 51);">bus.$emit(</span><span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'box-controller'</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">,</span> <span style="color: rgb(0, 128, 0); font-weight: bold; font-family: Monaco;">'马上到'</span><span style="font-family: Monaco; color: rgb(51, 51, 51);">)</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">})</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">}</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">}</font></span></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><br style="font-family: Monaco; color: rgb(51, 51, 51);"/></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">script</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">style</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><br style="font-family: Monaco; color: rgb(51, 51, 51);"/></font></div><div style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;"><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&lt;/</span><span style="color: rgb(0, 0, 128); background-color: rgb(239, 239, 239); font-weight: bold; font-family: Monaco;">style</span><span style="background-color: rgb(239, 239, 239); font-family: Monaco; color: rgb(51, 51, 51);">&gt;</span></font></div></div><div><span style="font-size: 12pt;">    自动挡   ---------  推荐<br/></span></div><div><span style="font-size: 12pt;">        main.js---扩展了Vue的属性<br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><span style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: 宋体;">Vue.</span><span style="background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-family: 宋体; font-weight: bold;">prototype</span><span style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: 宋体;">.</span><span style="background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-family: 宋体; font-weight: bold;">$bus</span> <span style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: 宋体;">=</span> <span style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-family: 宋体; font-weight: bold;">new</span> <span style="color: rgb(0, 0, 0); font-family: 宋体;">Vue()</span></font></div></div><div><span style="font-size: 12pt;">    在组件内部就可以直接通过this.$bus访问，其余思路一致<br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">    缺点： 必须先监听，之后才可以获取数据（不加好友还想发微信？）<br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">二、使用状态管理器   ---  组件的值的管理   ----- 要不不用，要不就好好用   ----  如果你不知道是不是要用，那就不需要使用</span></div><div><span style="font-size: 12pt;">        <img src="组件之间的传值_files/Image.png" type="image/png" data-filename="Image.png"/><br/></span></div><div><span style="font-size: 12pt;">Vue全家桶：Vue + axios(fetch) + vue-router + mint-ui(element-ui) + vuex</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">vue init webpack myapp     </font></span></div></div><div><span style="font-size: 16px;">Vuex:<a href="https://vuex.vuejs.org/zh/" style="font-size: 12pt;">https://vuex.vuejs.org/zh/</a></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Vuex 是一个专为 Vue.js 应用程序开发的</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">状态管理模式----- 状态管理器-----之前的全局变量</span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化</span></div><div><img src="组件之间的传值_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-size: 12pt;"/></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 16px;">vue生命周期</span></div><div><img src="组件之间的传值_files/Image [2].png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="294"/></div><div><span style="font-size: 16px;">beforeCreate   ----  准备生孩子</span></div><div><span style="font-size: 16px;">created   ----- 怀上了</span></div><div><span style="font-size: 16px;">.....</span></div><div><span style="font-size: 16px;">beforeMount   ---- 马上要生</span></div><div><span style="font-size: 16px;">mounted    ----  生下了   ---  喂他吃东西（---ajax请求---更改状态，dom操作）</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">beforeUpdate  ---- 一天天长大</span></div><div><span style="font-size: 16px;">updated ----- 变化后 ---- 不要改变状态---会进入无限死循环----可以dom操作</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">beforeDestroy  ---- over   ---- 一定是有条件触发（天灾人祸）</span></div><div><span style="font-size: 16px;">destroyed   <span style="font-size: 16px;">---- over</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 16px;">单项数据流   ----   解耦</span></div><div> <img src="组件之间的传值_files/Image [3].png" type="image/png" data-filename="Image.png" width="342"/></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.7;-en-paragraph:true;">当我们的应用遇到</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.7; font-weight: bold;-en-paragraph:true;">多个组件共享状态</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.7;-en-paragraph:true;">时，单向数据流的简洁性很容易被破坏：</span></div><ul style="padding-left: 1.2em; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li><span style="color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 16px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.7;">多个视图依赖于同一状态。</span></li><li><span style="color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 16px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.7;">来自不同视图的行为需要变更同一状态。</span></li></ul><div><img src="组件之间的传值_files/Image [4].png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="449"/></div><div><font style="font-size: 12pt;"><br/></font></div><div style="line-height: 1.7; margin-top: 2rem; color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="line-height: 1.7; color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Vuex 和单纯的全局对象有以下两点不同：</span></div><ol style="padding-left: 1.2em; line-height: 1.7; color: rgb(44, 62, 80); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, Cantarell, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li><span style="line-height: 1.7;-en-paragraph:true;">Vuex 的状态存储是响应式的。store中状态改变，视图二次渲染。</span></li><li><span style="line-height: 1.7;-en-paragraph:true;">你不能直接改变 store 中的状态。改变 store 中的状态的唯一途径就是显式地</span><span style="line-height: 1.7; font-weight: bold;-en-paragraph:true;">提交 (commit) mutation</span><span style="line-height: 1.7;-en-paragraph:true;">。</span></li></ol><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 16px;">代码编写</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>cnpm i vuex -S</div><div>cnpm i axios -S</div><div><br/></div></div><div><span style="font-size: 16px;">创建一个文件store/index.js</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">import</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Vue</span> <span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">from</span> <span style="color: #008000; font-weight: bold; font-family: Monaco; font-size: 9pt;">'vue'</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #808080; font-style: italic; font-family: Monaco; font-size: 9pt;">// import Vuex from 'vuex'</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">import</span> <span style="color: #458383; font-family: Monaco; font-size: 9pt;">Vuex</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">, {Store}</span> <span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">from</span> <span style="color: #008000; font-weight: bold; font-family: Monaco; font-size: 9pt;">'vuex'</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Vue.use(Vuex)</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #808080; font-style: italic; font-family: Monaco; font-size: 9pt;">// const store = new Vuex.Store()</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">const</span> <span style="color: #458383; font-family: Monaco; font-size: 9pt;">store</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">=</span> <span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">new</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Store({</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">state</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">: {</span> <span style="color: #808080; font-style: italic; font-family: Monaco; font-size: 9pt;">// 所有组件用到的状态统一在这里设置----- 初始数据--将原先组件中data定义的数据移到这里</span><span style="color: rgb(128, 128, 128); font-family: 宋体; font-size: 13.5pt; font-style: italic;">---组件中可以通过this.$store.state.count获取</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">count</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">:</span> <span style="color: #0000ff; font-family: Monaco; font-size: 9pt;">0</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">,</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">movieList</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">: []</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">},</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">mutations</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">: {</span> <span style="color: #808080; font-style: italic; font-family: Monaco; font-size: 9pt;">// 改变状态的地方，一般不做复杂的业务逻辑，组件可以通过this.$<a href="http://store.commit/">store.commit</a>('changeList',data)----第二个参数为传递的值，第一个参数表示你执行哪一个改变状态的方法</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #7a7a43; font-family: Monaco; font-size: 9pt;">addNum</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">(state) {</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">state.</span><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">count</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">++</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">},</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #7a7a43; font-family: Monaco; font-size: 9pt;">reduceNum</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">(state) {</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">state.</span><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">count</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">--</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">},</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #7a7a43; font-family: Monaco; font-size: 9pt;">add2Num</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">(state) {</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">state.</span><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">count</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">+=</span> <span style="color: #0000ff; font-family: Monaco; font-size: 9pt;">2</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">},</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #7a7a43; font-family: Monaco; font-size: 9pt;">changeList</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">(state, data) {</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">state.</span><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">movieList</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">= data</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">})</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">export default</span> <span style="color: #458383; font-family: Monaco; font-size: 9pt;">store</span></div></div><div><span style="font-size: 16px;">在main.js中将store挂载在根实例中，这样全局范围内均可通过this.$store拿到这个仓库</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #808080; font-style: italic; font-family: Monaco; font-size: 9pt;">// The Vue build version to load with the `import` command</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #808080; font-style: italic; font-family: Monaco; font-size: 9pt;">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">import</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Vue</span> <span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">from</span> <span style="color: #008000; font-weight: bold; font-family: Monaco; font-size: 9pt;">'vue'</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">import</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">App</span> <span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">from</span> <span style="color: #008000; font-weight: bold; font-family: Monaco; font-size: 9pt;">'./App'</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">import</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">router</span> <span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">from</span> <span style="color: #008000; font-weight: bold; font-family: Monaco; font-size: 9pt;">'./router'</span></div><div style="font-family: Monaco;"><span style="font-size: 9pt; color: rgb(0, 0, 128); font-weight: bold; font-family: Monaco;">i</span><font color="#E30000" style="font-size: 14pt;"><span style="font-weight: bold; font-family: Monaco;">mport</span> <span style="font-family: Monaco;">store</span> <span style="font-weight: bold; font-family: Monaco;">from</span> <span style="font-weight: bold; font-family: Monaco;">'./store/index.js'</span></font></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Vue.config.</span><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">productionTip</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">=</span> <span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">false</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #808080; font-style: italic; font-family: Monaco; font-size: 9pt;">/* eslint-disable no-new */</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #000080; font-weight: bold; font-family: Monaco; font-size: 9pt;">new</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Vue({</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">el</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">:</span> <span style="color: #008000; font-weight: bold; font-family: Monaco; font-size: 9pt;">'#app'</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">,</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">router,</span></div><div style="font-family: Monaco;"><font color="#E30000" style="font-size: 14pt;"><span style="font-family: Monaco;">store</span><span style="font-family: Monaco;">,</span></font></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">components</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">: { App },</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="color: #660e7a; font-weight: bold; font-family: Monaco; font-size: 9pt;">template</span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">:</span> <span style="color: #008000; font-weight: bold; font-family: Monaco; font-size: 9pt;">'&lt;App/&gt;'</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">})</span></div></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">需要获取值</span><br/></div><div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>{{this.$store.state.count}}</div></div>
需要改变值</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>this.$store.commit('mutation名字'，参数)</div></div><div><br/></div><div><span style="font-size: 16px;">获取值非常难看，理想的是直接通过{{count}}</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import {mapState} from ‘vuex’</div><div><br/></div><div>组件内添加一个选项</div><div>computed: mapState(['count',......])</div></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 