<html>
<head>
  <title>08 react virtual DOM  diff算法</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/6.1.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="909"/>
<h1>08 react virtual DOM  diff算法</h1>

<div>
<span><div><div><a href="https://segmentfault.com/a/1190000000606216">https://segmentfault.com/a/1190000000606216</a></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在深入实现的细节之前, 需要了解一下 React 怎样工作的.</span><br/></div><div><span style="font-size: 14px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif;">注意：</span><span style="font-size: 14px; color: rgb(255, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif;">此处为16版本以前定义react组件的写法    React.createClass语法</span></span></div><div><span style="font-size: 14px;"><span style="font-size: 14px; color: rgb(255, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif;">    16以后的写法为class语法和函数式语法<br/></span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="-apple-system, Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 14px;"><font color="#FF0000">class语法：</font></span></font></div><div><font face="-apple-system, Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 14px;"><font color="#FF0000">    class Com extends React.Component{}<br/></font></span></font></div><div><font face="-apple-system, Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 14px;">函数式写法</span></font></div><div><font face="-apple-system, Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 14px;">    var Com =  (props) =&gt; {}<br/></span></font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51); background: none; border-radius: 0px; overflow-wrap: normal; font-weight: bold;">//16版本前写法</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51); background: none; border-radius: 0px; overflow-wrap: normal; font-weight: bold;">var</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">MyComponent = React.createClass({</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">render</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">:</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51); background: none; border-radius: 0px; overflow-wrap: normal; font-weight: bold;">function</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">()</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">{</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51); background: none; border-radius: 0px; overflow-wrap: normal; font-weight: bold;">if</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51); background: none; border-radius: 0px; overflow-wrap: normal; font-weight: bold;">this</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">.props.first) {</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51); background: none; border-radius: 0px; overflow-wrap: normal; font-weight: bold;">return</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&lt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">div</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 128, 128); background: none; border-radius: 0px; overflow-wrap: normal;">className</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">=</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(221, 17, 68); background: none; border-radius: 0px; overflow-wrap: normal;">&quot;first&quot;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&gt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&lt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">span</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&gt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">A Span</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&lt;/</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">span</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&gt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&lt;/</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">div</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&gt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">;</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">}</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51); background: none; border-radius: 0px; overflow-wrap: normal; font-weight: bold;">else</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">{</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51); background: none; border-radius: 0px; overflow-wrap: normal; font-weight: bold;">return</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&lt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">div</span> <span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 128, 128); background: none; border-radius: 0px; overflow-wrap: normal;">className</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">=</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(221, 17, 68); background: none; border-radius: 0px; overflow-wrap: normal;">&quot;second&quot;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&gt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&lt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">p</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&gt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">A Paragraph</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&lt;/</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">p</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&gt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&lt;/</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">div</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(0, 0, 128); background: none; border-radius: 0px; overflow-wrap: normal;">&gt;</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">;</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">}</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">}</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">});</span></div></div><div><br/></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">需要特别注意, render 执行的结果得到的不是真正的 DOM 节点.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">结果仅仅是轻量级的 JavaScript 对象, 我们称之为</span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(255, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">virtual DOM---虚拟DOM</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">React 要从这个表现形式当中尝试找到前一个渲染结果到后一个的最小步数.</span></div><div style="box-sizing: border-box; margin: 1.5em 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">从没有到第一步</span></div><ul style="box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; margin: 0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">创建节点: </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;div className=&quot;first&quot;&gt;&lt;span&gt;A Span&lt;/span&gt;&lt;/div&gt;</span></li></ul><div><span style="background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 11pt; color: rgb(51, 51, 51); font-family: -apple-system;">第一步到第二步</span></span><br/></div><ul style="box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; margin: 0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">替换属性: </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">className=&quot;first&quot; 到 className=&quot;second&quot;</span></li><li style="box-sizing: border-box; margin: 0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">替换节点: </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;span&gt;A Span&lt;/span&gt;</span><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> 到 </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;p&gt;A Paragraph&lt;/p&gt;</span></li></ul><div><span style="background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); font-size: 11pt; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;;">第二步到没有</span></span><br/></div><ul style="box-sizing: border-box; margin: 1.5em 0px 1.5em 3em; padding-left: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; margin: 0.3em 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">删除节点: </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;div className=&quot;second&quot;&gt;&lt;p&gt;A Paragraph&lt;/p&gt;&lt;/div&gt;</span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px;"><br/></span></li></ul><h4 style="box-sizing: border-box; margin: 1.5em 0px; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.2;">按照层级  ---- 穿了几层衣服</span></h4><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">找到两棵任意的树之间最小的修改是一个复杂度为</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">O(n^3)</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">的问题.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">你可以想象, 我们的例子里这不是容易处理的.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">React 用了一种简单但是强大的技巧, 达到了接近</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">O(n)</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">的复杂度.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">React 仅仅是尝试把树按照层级分解. 这彻底简化了复杂度,</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">而且也不会失去很多, 因为 Web 应用很少有 component 移动到树的另一个层级去.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">它们大部分只是在相邻的子节点之间移动.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></div><div><img src="08 react virtual DOM  diff算法_files/Image.png" type="image/png" data-filename="Image.png" style="font-weight: bold; font-family: -apple-system; font-size: 11pt; color: rgb(51, 51, 51);"/></div><div><br/></div><h4 style="box-sizing: border-box; margin: 1.5em 0px; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.2;">列表  ----  体现key的重要性---幼儿园接孩子（没有就相当于刚雇了个保姆没见过孩子去接孩子）</span></h4><div style="box-sizing: border-box; margin: 1.5em 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">假设我们有个 component, 一个循环渲染了 5 个 component,</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">随后又在列表中间插入一个新的 component.</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">只知道这些信息, 要弄清两个 component 的列表怎么对应很难.</span></div></div><div>默认情况下, React 会将前一个列表第一个 component 和后一个第一个关联起来, 后面也是.</div><div>你可以写一个 <span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(255, 0, 0); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;">key</span><span style="color: rgb(255, 0, 0);"> </span>属性帮助 React 来处理它们之间的对应关系.</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">实际中, 在子元素中找到唯一的 key 通常很容易.</span></div><div><img src="08 react virtual DOM  diff算法_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><h4 style="box-sizing: border-box; margin: 1.5em 0px; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.2;">Components  ---  组件设计的重要性-设计的越好，消耗的资源越少</span></h4><div><span style="font-size: 16.25px;"><span style="font-size: 16.25px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold;">穿衣服--春夏秋冬 --- 什么样的季节穿什么样的衣服</span></span></div><div><span style="font-size: 16.25px;"><span style="font-size: 16.25px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold;">    夏天：短裤 短袖  ---  不可能不换<br/></span></span></div><div style="box-sizing: border-box; margin: 1.5em 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">React app 通常由用户定义的 component 组合而成,</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">通常结果是一个主要是很多 </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">div</span><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> 组成的树.</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">这个信息也被 React 的 diff 算法考虑进去, React 只会匹配相同 class 的 component.</span></div></div><div>比如, 如果有个 <span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;">&lt;Header&gt;</span> 被 <span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;">&lt;ExampleBlock&gt;</span> 替换掉了,</div><div>React 会删除掉 header 再创建一个 example block.</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">我们不需要花宝贵的时间去匹配两个不大可能有相似之处的 component.  --- <span style="color: rgb(255, 0, 0);">你一个男穿什么女的衣服</span></span></div><div><img src="08 react virtual DOM  diff算法_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div><span style="font-size: 16.25px;"><span style="font-size: 16.25px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold;">事件代理</span></span></div><div>性能优化最重要的一项是减少DOM操作，很费内存----真实DOM</div><div>虚拟DOM</div><div>     <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">React 部署了一种流行技术, 叫做&quot;事件代理&quot;.</span><br/></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">        </span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">事件 listener 被绑定到整个文档的根节点上.   ----   html</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px;"><br/></span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">    </span> <span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: -apple-system; font-variant-caps: normal; font-variant-ligatures: normal;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">当事件被触发, 浏览器会给出一个触发的目标的 DOM 节点. --- 鸟枪换大炮---手动-自动</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px;"><br/></span></span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">        </span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">为了在 DOM 的层级传播事件, React 不会迭代 virtual DOM 的层级.</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px;"><br/></span></span></span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">        依靠每个 React component 各自</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(255, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">独立的 id</span></span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">来编码这个层级.，就好比下图中的</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(255, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">不同的颜色</span></span></div><div><img src="08 react virtual DOM  diff算法_files/Image [3].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system; font-size: 11pt; color: rgb(51, 51, 51);" width="198"/></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">能通过简单的字符串操作来获取所有父级 component 的父级内容.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">把事件 listener 存储在 hash map 当中, 我们发现性能比放到 virtual DOM 还要好.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">这个例子展示了, 当一个事件广播到整个 virtual DOM 时发生什么.</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(153, 153, 136); background: none; border-radius: 0px; overflow-wrap: normal;">// dispatchEvent('click', 'a.b.c', event)</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">clickCaptureListeners[</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(221, 17, 68); background: none; border-radius: 0px; overflow-wrap: normal;">'a'</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">](event);</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">clickCaptureListeners[</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(221, 17, 68); background: none; border-radius: 0px; overflow-wrap: normal;">'a.b'</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">](event);</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">clickCaptureListeners[</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(221, 17, 68); background: none; border-radius: 0px; overflow-wrap: normal;">'a.b.c'</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">](event);</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">clickBubbleListeners[</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(221, 17, 68); background: none; border-radius: 0px; overflow-wrap: normal;">'a.b.c'</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">](event);</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">clickBubbleListeners[</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(221, 17, 68); background: none; border-radius: 0px; overflow-wrap: normal;">'a.b'</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">](event);</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">clickBubbleListeners[</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(221, 17, 68); background: none; border-radius: 0px; overflow-wrap: normal;">'a'</span><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 1em; background: none; border-radius: 0px; overflow-wrap: normal; color: rgb(51, 51, 51);">](event);</span></div></div><div><br/></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">浏览器为每个事件和每个 listener 创建一个</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(255, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">新的事件对象.</span></span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">这个事件对象的属性很不错, 你能获取到事件的引用, 甚至修改掉.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">然而这也意味着</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(255, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">高额的内存分配</span></span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">. ---- 性能消耗大   ------   不管有没有就是新建</span></div><div><br/></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">React 在启动时就为那些对象分配了一个内存池.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">任何时候需要用到事件对象, 就可以从这个内存池进行复用.</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">这一点非常显著地减轻了垃圾回收的负担.          ------   有则复用，没则创建</span></div><div><br/></div><div><br/></div><div><span style="font-size: 16.25px;"><span style="font-size: 16.25px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: bold;">渲染</span></span></div><h4 style="box-sizing: border-box; margin: 1.5em 0px; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.2;">合并操作</span></h4><div style="box-sizing: border-box; margin: 1.5em 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system; font-variant-caps: normal; font-variant-ligatures: normal;">你调用 component 的 </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">setState</span><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法的时候, React 将其标记为 dirty.</span></div><div style="margin-top: 1em; margin-bottom: 1em; font-size: 12pt;"><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">到每一个事件循环结束, React 检查所有标记 dirty 的 component 重新绘制.</span></div></div><div style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system;">这里的&quot;合并操作&quot;是说, 在一个事件循环当中, DOM 只会被更新一次.</span></div><div style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system;">这个特性是构建高性能应用的关键, 而且用通常的 JavaScript 代码难以实现.</span></div><div style="margin-top: 1em; margin-bottom: 1em; font-size: 12pt;"><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system;-en-paragraph:true;">而在 React 应用里, 你默认就能实现.</span></div><div><img src="08 react virtual DOM  diff算法_files/Image [4].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><h4 style="box-sizing: border-box; margin: 1.5em 0px; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.2;">子树渲染</span></h4><div>调用 <span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;">setState</span> 方法时, component 会重新构建包括子节点的 virtual DOM.</div><div>如果你在根节点调用 <span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;">setState</span>, 整个 React 的应用都会被重新渲染.</div><div>所有的 component, 即便没有更新, 都会调用他们的 <span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;">render</span> 方法.</div><div>            -----<span style="color: rgb(255, 0, 0);">如果父组件的状态发生了改变，所有的子组件都会重新被渲染   ----  涉及子组件</span><br/></div><div><span style="color: rgb(255, 0, 0);">    </span><span style="color: rgb(255, 0, 0);">    </span><span style="color: rgb(255, 0, 0);">   </span> <span style="color: rgb(50, 135, 18);">vue高明处：vue只改变想关联的组件   ----   可以不涉及子组件</span><br/></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">这个听起来可怕, 性能像是很低, 但实际上我们不会触碰真实的 DOM, 运行起来没那样的问题.</span></div><div style="margin-top: 1em; margin-bottom: 1em;"></div><div style="box-sizing: border-box; margin: 1.5em 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">首先, 我们讨论的是展示用户界面. 因为屏幕空间有限, 通常你需要一次渲染成百上千条指令.</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">JavaScript 对于能处理的整个界面, 在业务逻辑上已经足够快了.</span></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><div>另一点, 在写 React 代码时, 每当有数据更新, 你不是都调用根节点的 <span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;">setState</span>.</div><div>你会在需要接收对应更新的 component 上调用, 或者在上面的几个 component.</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">你很少要一直到根节点上. 就是说界面更新只出现在用户产生交互的局部</span></div><div><span style="-en-paragraph:true;"><img src="08 react virtual DOM  diff算法_files/Image [5].png" type="image/png" data-filename="Image.png"/><br/></span></div></div><div style="margin-top: 1em; margin-bottom: 1em;"></div><h4 style="box-sizing: border-box; margin: 1.5em 0px; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 1.25em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.2;">选择性子树渲染  ---  <span style="box-sizing: border-box; overflow: auto; font-size: 1em; word-break: break-word; word-wrap: break-word; background: none; border: none; border-radius: 0px; max-height: 35em; position: relative; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: normal; color: rgb(255, 0, 0); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">shouldComponentUpdate --- 极大地提高性能</span></span></h4><div style="box-sizing: border-box; margin: 1.5em 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">最后, 你还有可能去掉一些子树的重新渲染.</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">如果你在 component 上实现以下方法的话:</span></div></div><div style="box-sizing: border-box; overflow: auto; font-size: 0.93em; padding: 1em; margin: 1.5em 0px; word-break: break-all; word-wrap: break-word; border: none; border-radius: 4px; max-height: 35em; position: relative; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; overflow: auto; font-size: 1em; word-break: break-word; word-wrap: break-word; background: none; border: none; border-radius: 0px; max-height: 35em; position: relative; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: normal; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">boolean</span> <span style="box-sizing: border-box; overflow: auto; font-size: 1em; word-break: break-word; word-wrap: break-word; background: none; border: none; border-radius: 0px; max-height: 35em; position: relative; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: normal;"><span style="font-size: 1em; background-color: initial; color: rgb(255, 0, 0); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.45;">shouldComponentUpdate</span></span><span style="box-sizing: border-box; overflow: auto; font-size: 1em; word-break: break-word; word-wrap: break-word; background: none; border: none; border-radius: 0px; max-height: 35em; position: relative; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: normal; color: rgb(51, 51, 51); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(object nextProps, object nextState)</span></div><div style="box-sizing: border-box; margin: 1.5em 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">根据 component 的前一个和下一个 </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">props/state</span><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">,</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">你可以告诉 React 这个 component 没有更新, 也不需要重新绘制.</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">实现得好的话, 可以带来</span><span style="font-size: 14px; color: rgb(255, 0, 0); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">巨大的性能提升.</span></span></div></div><div style="box-sizing: border-box; margin: 1.5em 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">要用这个方法, 你要能够对 JavaScript Object 进行比对.</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">这件有很多细节的因素, 比如对比应该是深度的还是浅层的,</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">如果要深的, 我们是用不可变数据结构, 还是进行深度拷贝...</span></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><div>而且你要注意, 这个函数每次都会被调用, 所以你要确保运行起来花的时间更少,</div><div>比 React 的做法时间少, 还有比计算 component 需要的时间少,</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">即便重新绘制并不是必要的.</span></div><div><span style="-en-paragraph:true;"><img src="08 react virtual DOM  diff算法_files/Image [6].png" type="image/png" data-filename="Image.png"/><br/></span></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">react 消耗性能的模型很简单, 很好理解: 每次调用</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">setState</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">会重新计算整个子树.</span></span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">如果你想要提高性能, 尽量少调用</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">setState</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">,</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">还有用</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; font-size: 0.93em; background-color: rgb(249, 242, 244); border-radius: 4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">shouldComponentUpdate</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">减少大的子树的重新计算.</span><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">ref  可以获取到dom节点   ----   可以实现数据的双向绑定效果</span></div><div>    使用规则跟vue中的ref类似</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 21pt; font-family: consolas; color: rgb(219, 120, 0); font-size: 18pt;">getDataHandler</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">(){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">  </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(60, 122, 3); font-size: 18pt;">console</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">.log(</span><span style="min-height: 21pt; font-family: consolas; color: rgb(54, 75, 192); font-size: 18pt;">this</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">.refs.username.value)</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">  </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(54, 75, 192); font-size: 18pt;">this</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">.setState({</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">     val:</span> <span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">this</span><span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">.refs.username.value</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">   })</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">  }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;"> </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(149, 163, 171); font-size: 18pt;">//装载、重新渲染</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(1, 1, 1); font-size: 18pt;"> </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(219, 120, 0); font-size: 18pt;">render</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">(){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">   </span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">   </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">return</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">(</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">      &lt;</span><span style="min-height: 21pt; font-family: consolas; color: rgb(35, 105, 182); font-size: 18pt;">div</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(203, 45, 1); font-size: 18pt;">className</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;container&quot;</span><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">&gt;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">        &lt;</span><span style="min-height: 21pt; font-family: consolas; color: rgb(60, 122, 3); font-size: 18pt;">input</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">type</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;text&quot;</span> <span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">ref</span><span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">=</span><span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">&quot;username&quot;</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">onChange</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">{</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(54, 75, 192); font-size: 18pt;">this</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">.getDataHandler.bind(</span><span style="min-height: 21pt; font-family: consolas; color: rgb(54, 75, 192); font-size: 18pt;">this</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">) }</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">/&gt;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">      </span><span style="min-height: 21pt; font-family: consolas; color: rgb(1, 1, 1); font-size: 18pt;"> </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">{</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(54, 75, 192); font-size: 18pt;">this</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">.state.val }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(1, 1, 1); font-size: 18pt;">     </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">&lt;/div</span><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">&gt;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">   </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">)</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">  }</span></div></div><div>  </div><div>五、dangerouslySetInnerHTML   类似  vue中的v-html，但是不是一样，vue中的是一个变量，这里是一个对象</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 21pt; font-family: consolas; color: rgb(219, 120, 0); font-size: 18pt;">getval</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">(){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">   </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(60, 122, 3); font-size: 18pt;">console</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">.log(</span><span style="min-height: 21pt; font-family: consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;1111111222222&quot;</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">)</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">   </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(54, 75, 192); font-size: 18pt;">const</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">md</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;&lt;p&gt;111111111&lt;/p&gt;&quot;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(1, 1, 1); font-size: 18pt;">   </span> <span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">return</span> <span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">{</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; font-size: 18pt; color: rgb(255, 0, 0);">      __html: md</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; font-size: 18pt; color: rgb(255, 0, 0);">    }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">  }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;"> </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(149, 163, 171); font-size: 18pt;">//装载、重新渲染</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(1, 1, 1); font-size: 18pt;"> </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(219, 120, 0); font-size: 18pt;">render</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">(){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">   </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">return</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">(</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">      &lt;</span><span style="min-height: 21pt; font-family: consolas; color: rgb(35, 105, 182); font-size: 18pt;">div</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(203, 45, 1); font-size: 18pt;">className</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;container&quot;</span><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">&gt;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">        &lt;</span><span style="min-height: 21pt; font-family: consolas; color: rgb(60, 122, 3); font-size: 18pt;">input</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">type</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;text&quot;</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">ref</span><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span><span style="min-height: 21pt; font-family: consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;username&quot;</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">onChange</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">{</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(54, 75, 192); font-size: 18pt;">this</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">.getDataHandler.bind(</span><span style="min-height: 21pt; font-family: consolas; color: rgb(54, 75, 192); font-size: 18pt;">this</span><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">) }</span> <span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">/&gt;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">       </span> <span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">&lt;</span><span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">div</span> <span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">dangerouslySetInnerHTML</span> <span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">=</span> <span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">{</span> <span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">this</span><span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">.getval() }&gt;&lt;/</span><span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">div</span><span style="min-height: 21pt; color: rgb(255, 0, 0); font-family: consolas; font-size: 18pt;">&gt;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">     </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">&lt;/div</span><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">&gt;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(87, 121, 9); font-size: 18pt;">   </span> <span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">)</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: consolas; color: rgb(62, 75, 83); font-size: 18pt;">  }</span></div></div><div><br/></div><div><br/></div><div>类型验证 <a href="https://reactjs.org/docs/typechecking-with-proptypes.html">https://reactjs.org/docs/typechecking-with-proptypes.html</a></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>cnpm i prop-types -D</div><div><br/></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(197, 165, 197);">class</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(250, 200, 99);">MyComponent</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(197, 165, 197);">extends</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(250, 200, 99);">React</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">.</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(250, 200, 99);">Component</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">{</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(121, 182, 242);">render</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">(</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">)</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">{</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(153, 153, 153);">// This must be exactly one element or it will warn.</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(197, 165, 197);">const</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">children</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(215, 222, 234);">=</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(197, 165, 197);">this</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">.</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">props</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">.</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">children</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">;</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(197, 165, 197);">return</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">(</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">&lt;</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(252, 146, 158);">div</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">&gt;</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">{</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">children</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">}</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">&lt;/</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(252, 146, 158);">div</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">&gt;</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">)</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">;</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">}</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">}</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">MyComponent</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">.</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">propTypes</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(215, 222, 234);">=</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">{</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">children</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">:</span> <span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">PropTypes</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">.</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">element</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">.</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(51, 51, 51);">isRequired</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">}</span><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">;</span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);"><br/></span></div><div style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span style="font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 1em; color: rgb(95, 179, 179);">//暴露--或者--ReactDOM.render</span></div></div><div><br/></div><div style="margin-top: 1em; margin-bottom: 1em;"><br/><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><br/></span></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 